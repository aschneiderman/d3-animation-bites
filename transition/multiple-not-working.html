<!DOCTYPE html>
<head>
  <meta charset="utf-8">
	<script src="http://d3js.org/d3.v4.0.0-alpha.43.min.js"></script>
</head>
<body>
<h1>Multiple Items: State Change Using A Standard Transition</h1>

<svg width="900" height="600"></svg>        <!-- SVG graphics will go here  -->

<script type="text/javascript">

var numStates = 3;
var members = [
    { id: 1, 	state: [2, 3, 1] },
    { id: 2, 	state: [2, 2, 2] },
		{ id: 7, 	state: [2, 3, 1] },
		{ id: 12, 	state: [2, 2, 2] },
    { id: 27, 	state: [2, 3, 1] },
    { id: 42, 	state: [2, 2, 2] },
		{ id: 57, 	state: [2, 3, 1] },
		{ id: 96,		state: [2, 1, 1]}
];

var	Time = 0;

d3.select("svg").selectAll("rect")
  .data(members)
  .enter().append("rect")
    .attr("x",0)
    .attr("y",function(d,i) {
      // console.log(i, d.state[1], 300 + d.state[1]* 20);
        return 300 + d.state[1]* 20}  )
    .attr("width",10)
    .attr("height",10)
    .style("fill", "Crimson")
    ;
    // .transition()
    //   .ease(d3.easeLinear)
  	// 	.on("start", changeState);

 function changeState()  {
	 Time = Time + 1;
	 if (Time < 11) {
	 d3.active(this)
     .transition()
				 	.duration(400)
          .ease(d3.easeLinear)
          .delay(1)
       .attr("x", 60 + (Time * 80))
			 .attr("y", 80 + ( 500 - ((Time % 3) *200) ))
     .transition()
       .on("start", changeState);
		 };
 };

</script>

<!-- NOTE: getting info about how to handle chain transitions from:
http://bl.ocks.org/mbostock/346f4d967650b27c0511 -->
</body>
</html>
